/*
*
*                                   ALIRHome
*
*                                 MIT License
*
*    Copyright (c) 2018 Andrea Zago
*
*    Permission is hereby granted, free of charge, to any person obtaining a copy
*    of this software and associated documentation files (the "Software"), to deal
*    in the Software without restriction, including without limitation the rights
*    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
*    copies of the Software, and to permit persons to whom the Software is
*    furnished to do so, subject to the following conditions:
*
*    The above copyright notice and this permission notice shall be included in all
*    copies or substantial portions of the Software.
*
*    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
*    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
*    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
*    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
*    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
*    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
*    SOFTWARE.
*
*/
function generateNews(){$.ajax({url:"https://cors-anywhere.herokuapp.com/https://alir.eu/api/forums/topics?key=10f9dfa58c23a1ab511fc2478672ebef&forums=40,116,153,39,11,84,129&sortDir=desc&hidden=0",type:"GET",dataType:"json",timeout:5e3}).done(function(t){appendArticles(t.results.slice(0,5))})}function requestStaffNews(){$.ajax({url:"https://cors-anywhere.herokuapp.com/https://alir.eu/api/forums/topics?key=10f9dfa58c23a1ab511fc2478672ebef&forums=112&sortDir=desc&hidden=0",type:"GET",dataType:"json",timeout:5e3}).done(function(t){var e=t.results,a=e.slice(0,4);e.slice(0,1);appendHeading(a),$("#emptystaffnews").animateCss("bounceOut").hide().attr("hidden",!0),$("#latest-news").show(400).removeAttr("hidden").animateCss("bounceIn")})}function appendHeading(t){for(var e=0;e<t.length;e++){var a=t[e].title,i=t[e].url,s=(t[e].tags[0],t[e].firstPost.author.name),o=t[e].firstPost.date,n=moment(o).fromNow(),r=$("#card"+e+"title"),l=$("#card"+e+"info"),d=$("#card"+e+"select"),c=$("#card"+e+"image");r.html(a).attr("href",i).attr("title","Clicca per leggere la notizia"),l.html("<small class='text-muted textgray'><i class='fas fa-user' title='Autore'></i> "+s+" - <i class='fas fa-clock' title='Scritto'></i> "+n+"</small>"),c.attr("src","https://pacificgl.com/images/arma3_2.jpg"),d.animateCss("flipInY")}console.log("appendHeading function completed. All data successiful imported from alir.eu")}function appendArticles(t){for(var e=0;e<t.length;e++){var a=t[e].forum.name,i=t[e].title,s=t[e].posts,o=t[e].url,n=t[e].views,r=t[e].firstPost.author.name,l=t[e].firstPost.author.profileUrl,d=t[e].firstPost.content,c=t[e].firstPost.date,m=moment(c).fromNow(),f="<div class='col-md-6 hvr-grow' style='overflow: hidden;'><div class='card flex-md-row mb-4 box-shadow h-md-250' style='overflow: hidden;'> <div class='card-body d-flex flex-column align-items-start' style='overflow: hidden;'> <strong class='d-inline-block mb-2 text-primary' style='font-size: small'>"+a+"</strong> <h3 style='font-size: x-large; white-space: nowrap; overflow: hidden; width: 370px; text-overflow: ellipsis;' class='mb-0' title='Continua a leggere...'> <a href='"+o+"' class='wstitle'>"+i+"</a></h3> <div class='mb-1 text-muted'>Scritto "+m+" da <a title='Visualizza il profilo utente' href='"+l+"'>"+r+"</a></div> <div class='mb-1'><i title='Visualizzazioni' class='fas fa-eye'></i> "+n+" <i title='Risposte' class='fas fa-comments '></i> "+s+" </div></div> </div></div>",f="<div class='col-sm-12'><div class='card'><div class='card-header'><h5>"+i+"</h5></div><div class='card-body'><p class='card-text'> "+d+"</p><p class='card-text'><small class='text-muted'>Scritto "+m+" da <a title='Visualizza il profilo utente' href='"+l+"'>"+r+"</a></small></p>";$("#recentContent").append(f)}$("#loadPost").attr("hidden",!0),console.log("Import post completato!")}console.log("Avvio ALIRHome, utilizzare la console solo per scopi di sviluppo, non trasmettere i propri dati personali o bancari!"),moment.locale("it"),$.fn.extend({animateCss:function(t,e){var a=function(t){var e={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var a in e)if(void 0!==t.style[a])return e[a]}(document.createElement("div"));return this.addClass("animated "+t).one(a,function(){$(this).removeClass("animated "+t),"function"==typeof e&&e()}),this}}),$(document).ready(function(){console.log("Starting appendHeading and appendArticles functions. Import in progress... please wait!"),setTimeout(function(){generateNews(),requestStaffNews()},1e4)});